{% extends "ProcesoBundle:All:Solicitante/layout.html.twig" %}

{% block body %}

<div class="container" ng-app="listaActividadesModule" ng-controller="listaActividadesController">

  <div class="content">

    <div class="content-container">

      <div class="content-header">
        <h2 class="content-header-title"><strong>Historial de solicitudes</strong></h2>
        
      </div> <!-- /.content-header -->
      <div>
      <div ng-if="response.length>0" class="row">
          <div class="col-sm-12">
              <div class="panel panel-default">
                <!-- Default panel contents -->
                <div class="panel-heading">Lista de solicitudes</div>

                <!-- Table -->
                <table class="table">
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Nombre de proceso</th>
                      <th>Fecha de solicitud</th>
                      <th>Responsable actual</th>
                      <th>Estatus</th>
                    </tr>
                  </thead>
                  <tbody ng-repeat="value in response">
                    <tr>
                      <td>{[{value.id}]}</td>
                      <td>{[{value.nombreProceso}]}</td>
                      <td>{[{value.fechaSolicitud}]}</td>
                      <td>
                        <label ng-if="value.responsableActual == null">Ninguno</label>
                        <label ng-if="value.responsableActual != null">{[{value.responsableActual}]}</label>
                      </td>
                      <td>
                        <span ng-if="value.status==true" style="font-size: 100%;" class="label label-success">
                        Terminado
                        </span>
                        <span ng-if="value.status==false" style="font-size: 100%;" class="label label-warning">
                        En proceso
                        </span>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
          </div>
      </div>
      <div ng-if="response.length==0" class="alert alert-warning " role="alert">
        <strong>No hay ninguna actividad pendiente en este momento, vuelve mas tarde!</strong>
      </div>
      </div>
    </div> <!-- /.content-container -->
    <br>

      
  </div> <!-- /.content -->
</div> <!-- /.container -->
{#{{dump(task)}}#}
{% endblock %}
{% block javascripts %}
    {{ parent() }}
        <script type="text/javascript">
          var response = "{{ data }}";
          var div = document.createElement('div');
          div.innerHTML = response;
          response = div.firstChild.nodeValue;
          response = JSON.parse(response);
          console.log("response",response);
     </script>
      <script src="{{ asset('bundles/proceso/js/ng-file-upload.min.js') }}"></script>
    <script src="{{ asset('bundles/proceso/js/ng-file-upload-shim.min.js') }}"></script>
   <script src="{{ asset('bundles/proceso/js/angular/Solicitante/listaActividad/listaActividadesModule.js') }}"></script>
   <script src="{{ asset('bundles/proceso/js/angular/Solicitante/listaActividad/listaActividadesController.js') }}"></script>
   <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
   <script src="{{ path('fos_js_routing_js', {'callback': 'fos.Router.setData'}) }}"></script>

{% endblock %}